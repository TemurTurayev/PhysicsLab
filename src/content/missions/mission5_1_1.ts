import type { Mission } from '../../types';

const mission5_1_1: Mission = {
  id: '5-1-1',
  module: 5,
  order: 1,
  title: 'Что такое функция?',

  briefing: {
    situation: 'Встреть своего первого персонажа — линейную функцию. Она простая, честная и предсказуемая.',
    task: 'Создай функцию f(x) = 2x и познакомься с ней. Построй её график и посмотри, как она себя ведёт.',
    context: 'Функция — это как машина: даёшь ей число на вход, она применяет правило и выдаёт результат.',
  },

  starterCode: `from mathlab import *

# Создаём нашего первого персонажа — функцию
f = Function("___")  # Замени ___ на выражение 2*x

# Знакомимся с ней
print(f"Функция: {f}")
print(f"f(0) = {f(0)}")
print(f"f(1) = {f(1)}")
print(f"f(5) = {f(5)}")
print(f"f(-3) = {f(-3)}")

# Рисуем её портрет (график)
canvas = Canvas(x_range=(-5, 5), y_range=(-10, 10))
canvas.plot(f, color="blue", name="f(x) = 2x")
canvas.show()
`,

  theory: [
    '# Что такое функция?',
    '',
    'Функция — это **правило**, которое превращает одно число в другое.',
    '',
    '## Как это работает?',
    '',
    '```',
    'Вход (x)  →  [Правило]  →  Выход (y)',
    '   3      →   [× 2]     →     6',
    '   5      →   [× 2]     →    10',
    '  -2      →   [× 2]     →    -4',
    '```',
    '',
    '## Математическая запись',
    '',
    'Функцию записывают так:',
    '',
    '$$f(x) = 2x$$',
    '',
    'Где:',
    '- `f` — имя функции',
    '- `x` — вход (аргумент)',
    '- `2x` — правило (умножить на 2)',
    '',
    '## Примеры вычислений',
    '',
    '- $f(0) = 2 \\cdot 0 = 0$',
    '- $f(1) = 2 \\cdot 1 = 2$',
    '- $f(5) = 2 \\cdot 5 = 10$',
    '- $f(-3) = 2 \\cdot (-3) = -6$',
    '',
    '## График функции',
    '',
    'График — это **портрет** функции. Он показывает все пары (x, y), где y = f(x).',
    '',
    'Для f(x) = 2x график — это прямая линия через начало координат.',
  ],

  checks: [
    {
      type: 'function_expression',
      message_success: '✓ Правильно! Функция f(x) = 2x создана.',
      message_fail: '✗ Функция должна быть f(x) = 2x. Проверь выражение в кавычках.',
      expected_expression: '2*x',
    },
    {
      type: 'function_values',
      message_success: '✓ Отлично! Функция вычисляет значения правильно.',
      message_fail: '✗ Проверь вычисления. f(5) должно быть равно 10.',
      test_values: {
        '0': 0,
        '1': 2,
        '5': 10,
        '-3': -6,
      },
    },
    {
      type: 'canvas_plot',
      message_success: '✓ Супер! График построен и отображён.',
      message_fail: '✗ Не забудь построить график с помощью canvas.plot() и canvas.show().',
    },
  ],

  hints: [
    {
      level: 1,
      text: 'Подсказка 1: В Python умножение обозначается звёздочкой *. Например, 2 × x записывается как 2*x.',
    },
    {
      level: 2,
      text: 'Подсказка 2: Замени ___ на строку "2*x" (в кавычках). Должно получиться: Function("2*x")',
    },
    {
      level: 3,
      text: 'Подсказка 3: Полное решение:\nf = Function("2*x")\n\nПосле этого запусти код и посмотри на график!',
    },
  ],

  rewards: {
    xp: 50,
    stars: {
      bronze: 'Создал первую функцию',
      silver: 'Построил график без подсказок',
      gold: 'Понял концепцию функции как машины',
    },
  },

  metadata: {
    difficulty: 'intro',
    estimatedTime: 10,
    prerequisites: [],
    tags: ['функции', 'линейные функции', 'график', 'основы'],
  },
};

export default mission5_1_1;
